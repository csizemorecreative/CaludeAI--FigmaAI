# Design System Component Library

XD's library that contains the Design System theme to be shared inside OCLC.

- If you are working within WMS, use [`@oclc/ws-styleguide`](http://git.ent.oclc.org/projects/UIF/repos/ws-styleguide/browse) instead, which provides style overrides to ensure the theme works within the context of WMS styling.

## Usage

### Building/Running the Storybook site locally
First build storybook
```
npm run build-storybook
```

Then run storybook
```
npm run storybook
```

### Testing Storybook
[Test runner](https://storybook.js.org/docs/react/writing-tests/test-runner) has been added to the project. This verifies whether our stories render without any errors. This can be used on your locally **running** storybook instance or against a deployed storybook instance.

```
npm run test-storybook
```
runs against locally running instance

```
npm run test-storybook -- --url https://www.designsystem.dev.oclc.org/
```
runs against the deployed instance

#### Accessibility
When testing storybook, test runner will also check accessibility via axe-playwright. Please note that this does not take the place of manually testing for accessibility as, on average, Axe catches around 57% of WCAG issues.

### Deploying Storybook to AWS
1. Sign into the UX/UI AWS account via `aws sso login --profile <UXUI profile>`. More about that can be found: https://oclc-sso.awsapps.com/start#/
2. Build storybook as you would if you were running locally
3. Run either `deploy-storybook-pg` or `deploy-storybook-prod`

#### Storybook AWS Stack
If you wanted to build a Storybook AWS instance for your own testing/experimentation, you can set up the stack found in this [tutorial](https://aws.amazon.com/blogs/networking-and-content-delivery/authorizationedge-using-cookies-protect-your-amazon-cloudfront-content-from-being-downloaded-by-unauthenticated-users/). The stack can be found in a link under "Deploying the sample solution".

### Building and Publishing to Artifactory
To build the component library, run:
```
npm run build:lib
```
This will add the `/dist` directory with all the needed artifacts.

To publish the component library
Doing the following will publish the library to OCLC's [npm repository](https://artifact-m1.shr.oclc.org/artifactory/npm/)

For general instructions on how to set up your environment to publish there, see https://confluence.oclc.org/display/DevOps/Artifactory+Setup+for+npm+Artifacts+and+Dependencies

Once completed, go ahead and run `npm publish`